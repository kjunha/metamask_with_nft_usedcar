const HouseRental = artifacts.require("./HouseRental");
const TruffleAssert = require("truffle-assertions");
const { assert } = require("chai");
require('chai').use(require('chai-as-promised')).should();

contract("HouseRental", (accounts) => {
    let contract
    before(async () => {
        contract = await HouseRental.deployed()
    })

    describe('deployment', async () => {
        it('deployes successfully', async () => {
            const address = contract.address
            console.log(`contract address: ${address}`)
            assert.notEqual(address, '');
            assert.notEqual(address, 0x0);
        })
    })

    describe('rent a house', async () => {
        const user = accounts[1];

        it('rent succesfully', async() => {
            const rented = await contract.rent.call(2, {from: user});
            assert.equal(user, rented)
            const status = await contract.isRented(1);
            assert.equal(true, status);
        })
    })
})